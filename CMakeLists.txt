CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

SET(CMAKE_CXX_COMPILER clang++)

PROJECT(framework)

SET(SOURCE_DIR ${CMAKE_SOURCE_DIR}/src)
SET(TESTS_DIR ${CMAKE_SOURCE_DIR}/test)
SET(COMPILE_FLAGS "-Weverything -std=c++14 -Wno-c++98-compat -Wno-padded")

FILE(GLOB_RECURSE SOURCES ${SOURCE_DIR}/*.cpp)
FILE(GLOB_RECURSE HEADERS ${SOURCE_DIR}/*.hpp)
FILE(GLOB_RECURSE TEST_SOURCES ${TESTS_DIR}/*.cpp ${TESTS_DIR}/*.hpp)

SET(ALL_SOURCES ${SOURCES} ${HEADERS} ${TEST_SOURCES})

SET(INCLUDE_DIR ${SOURCE_DIR})

SET(LIBRARIES "")

SET(CMAKE_VERBOSE_MAKEFILE OFF)

SET(CMAKE_CXX_FLAGS_DEBUG "-g")
SET(CMAKE_CXX_FLAGS_RELEASE "-O3 -DNDEBUG")
SET(CMAKE_CXX_FLAGS_RELWITHDEBINFO "-O3 -DNDEBUG -DFORCE_ASSERT")

SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${COMPILE_FLAGS}")
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin/${CMAKE_BUILD_TYPE})

SET(CMAKE_EXPORT_COMPILE_COMMANDS ON)

INCLUDE_DIRECTORIES(${INCLUDE_DIR})

ADD_SUBDIRECTORY(${TESTS_DIR})
